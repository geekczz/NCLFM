#include "LX12864B_Driver.h"

#define LcmXPixel 128  //横向宽度
#define LcmYPixel 64	 //纵向高度 

#define MIN(A,B) ((A)<(B)?(A):(B))

#define uchar unsigned char
#define uint  unsigned int
#define code const
	
//uint8_t ComTable[]={3,2,1,0,7,6,5,4,};

uint8_t ComTable[]={0,7,6,5,4,3,2,1};

unsigned char Chinesechardot[16*94] = {	 
 /********************************************
 克(0) 计(1) 数(2) 器(3) 流(4) 速(5) 值(6) 设(7) 定(8) 量(9) 实(10) 际(11) 去(12) 皮(13) 重(14) 间(15)
 隔(16) 北(17) 京(18) 九(19) 应(20) 和(21) 智(22) 能(23) 控(24) 制(25) 电(26) 话(27) 秒(28) 是(29) 否(30) __(31)
 请(32) 放(33) 置(34) 容(35) 器(36)  或(37) 将(38) 取(39) 出(40) 后(41) 去(42) 皮(43) 再(44) 灌(45) 装(46)
 *********************************************/
	
0x20,0x20,0x27,0x24,0x24,0x24,0x24,0xFC,0x24,0x24,0x24,0x24,0x27,0x20,0x20,0x00,
0x01,0x01,0xC2,0x44,0x48,0x70,0x40,0x40,0x40,0x7E,0x41,0x41,0xC1,0x01,0x07,0x00,/*"克",0*/

0x02,0x02,0x42,0x33,0x00,0x02,0x02,0x02,0x02,0xFF,0x02,0x02,0x02,0x02,0x02,0x00,
0x00,0x00,0x00,0xFE,0x04,0x08,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,/*"计",1*/

0x09,0x4A,0x2C,0x08,0xFF,0x08,0x2C,0x4A,0x01,0x0E,0xF1,0x10,0x10,0x1F,0x10,0x00,
0x41,0x59,0x6A,0xC6,0x44,0x4A,0x71,0x00,0x01,0x02,0xCC,0x30,0xCC,0x02,0x01,0x00,/*"数",2*/

0x01,0x01,0x79,0x49,0x49,0x49,0x79,0x07,0x01,0x79,0x4D,0x4B,0x49,0x79,0x01,0x00,
0x10,0x10,0x2F,0x29,0x49,0x49,0x8F,0x00,0x80,0x4F,0x49,0x29,0x29,0x1F,0x10,0x00,/*"器",3*/

0x08,0x06,0x40,0x31,0x00,0x22,0x26,0x2A,0xB2,0x62,0x22,0x2A,0x26,0x23,0x20,0x00,
0x20,0x20,0x7E,0x80,0x01,0x02,0x7C,0x00,0x00,0x7F,0x00,0x00,0x7E,0x01,0x07,0x00,/*"流",4*/

0x02,0x02,0x42,0x33,0x00,0x20,0x2F,0x29,0x29,0xFF,0x29,0x29,0x2F,0x20,0x00,0x00,
0x00,0x02,0x04,0xF8,0x04,0x12,0x22,0x42,0x82,0xFA,0x82,0x42,0x22,0x12,0x02,0x00,/*"速",5*/

0x00,0x01,0x06,0x1F,0xE0,0x20,0x27,0x25,0x25,0xFD,0x25,0x25,0x27,0x20,0x00,0x00,
0x80,0x00,0x00,0xFF,0x02,0x02,0xFE,0x52,0x52,0x52,0x52,0x52,0xFE,0x02,0x02,0x00,/*"值",6*/

0x02,0x02,0x42,0x33,0x00,0x02,0x05,0x79,0x41,0x41,0x41,0x79,0x05,0x04,0x04,0x00,
0x00,0x00,0x00,0xFC,0x09,0x11,0x02,0xC2,0x34,0x08,0x14,0x62,0x82,0x01,0x01,0x00,/*"设",7*/

0x08,0x30,0x22,0x22,0x22,0x22,0xA2,0x63,0x22,0x22,0x22,0x22,0x22,0x28,0x30,0x00,
0x01,0x02,0x04,0x78,0x04,0x02,0x02,0xFE,0x22,0x22,0x22,0x22,0x22,0x02,0x02,0x00,/*"定",8*/

0x04,0x04,0x04,0x7D,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x7D,0x04,0x04,0x04,0x00,
0x00,0x01,0x01,0xF5,0x55,0x55,0x55,0xFF,0x55,0x55,0x55,0xF5,0x01,0x01,0x00,0x00,/*"量",9*/

0x08,0x30,0x20,0x21,0x28,0x26,0xA0,0x60,0x2F,0x20,0x20,0x20,0x20,0x28,0x30,0x00,
0x20,0x21,0x21,0x22,0xE2,0x24,0x28,0x30,0xE0,0x30,0x28,0x24,0x22,0x21,0x20,0x00,/*"实",10*/

0x00,0x7F,0x44,0x5A,0x61,0x00,0x04,0x44,0x44,0x44,0x47,0x44,0x44,0x44,0x04,0x00,
0x00,0xFF,0x20,0x10,0xE0,0x08,0x30,0xC0,0x02,0x01,0xFE,0x00,0x80,0x60,0x18,0x00,/*"际",11*/

0x00,0x00,0x10,0x10,0x10,0x10,0x10,0xFF,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x00,
0x80,0x80,0x82,0x86,0x8A,0x92,0xE2,0x82,0x82,0x82,0x8A,0x86,0x83,0x80,0x80,0x00,/*"去",12*/

0x00,0x00,0x1F,0x10,0x11,0x11,0x11,0x11,0xFF,0x11,0x11,0x11,0x14,0x18,0x00,0x00,
0x01,0x06,0xF8,0x01,0x01,0xC2,0x22,0x14,0x08,0x14,0x22,0xC2,0x01,0x01,0x01,0x00,/*"皮",13*/

0x08,0x08,0x28,0x2B,0x2A,0x2A,0x2A,0x3F,0x4A,0x4A,0x4A,0xCB,0x48,0x08,0x08,0x00,
0x02,0x02,0x0A,0xEA,0xAA,0xAA,0xAA,0xFE,0xAA,0xAA,0xAA,0xEA,0x0A,0x02,0x02,0x00,/*"重",14*/

0x00,0x1F,0x80,0x60,0x00,0x0F,0x48,0x48,0x48,0x4F,0x40,0x40,0x40,0x7F,0x00,0x00,
0x00,0xFF,0x00,0x00,0x00,0xF8,0x88,0x88,0x88,0xF8,0x00,0x02,0x01,0xFE,0x00,0x00,/*"间",15*/

0x00,0x7F,0x44,0x5A,0x61,0x00,0x40,0x5E,0x52,0x52,0x52,0x52,0x52,0x5E,0x40,0x00,
0x00,0xFF,0x20,0x10,0xE0,0x00,0xFF,0x90,0xD0,0xB0,0x9E,0xB0,0xD2,0x91,0xFE,0x00,/*"隔",16*/

0x00,0x04,0x04,0x04,0x04,0xFF,0x00,0x00,0x00,0xFF,0x02,0x04,0x08,0x10,0x00,0x00,
0x04,0x06,0x04,0x08,0x08,0xFF,0x00,0x00,0x00,0xFC,0x02,0x02,0x02,0x02,0x1E,0x00,/*"北",17*/

0x20,0x20,0x20,0x27,0x24,0x24,0xA4,0x64,0x24,0x24,0x24,0x27,0x20,0x20,0x20,0x00,
0x00,0x02,0x04,0xD8,0x40,0x42,0x41,0x7E,0x40,0x40,0x40,0xD0,0x08,0x06,0x00,0x00,/*"京",18*/

0x00,0x08,0x08,0x08,0x08,0xFF,0x08,0x08,0x08,0x08,0x0F,0x00,0x00,0x00,0x00,0x00,
0x01,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x00,0xFC,0x02,0x02,0x02,0x1E,0x00,/*"九",19*/

0x00,0x00,0x3F,0x20,0x22,0x21,0x20,0xA4,0x63,0x20,0x20,0x20,0x20,0x27,0x20,0x00,
0x02,0x0C,0xF0,0x02,0x02,0x82,0x72,0x02,0x02,0xC6,0x0A,0x32,0xC2,0x02,0x02,0x00,/*"应",20*/

0x04,0x24,0x24,0x25,0x7F,0xC4,0x44,0x04,0x00,0x1F,0x10,0x10,0x10,0x1F,0x00,0x00,
0x08,0x10,0x60,0x80,0xFF,0x80,0x60,0x00,0x00,0xFC,0x08,0x08,0x08,0xFC,0x00,0x00,/*"和",21*/

0x08,0x29,0xCA,0x4C,0x78,0x4C,0x4A,0x08,0x00,0x7E,0x42,0x42,0x42,0x7E,0x00,0x00,
0x00,0x00,0x00,0xFF,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0xFF,0x00,0x00,0x00,0x00,/*"智",22*/

0x10,0x33,0x52,0x92,0x12,0x52,0x33,0x18,0x00,0xFE,0x11,0x11,0x21,0x41,0x07,0x00,
0x00,0xFF,0x48,0x48,0x4A,0x49,0xFE,0x00,0x00,0x7E,0x11,0x11,0x21,0x41,0x07,0x00,/*"能",23*/

0x08,0x08,0x08,0xFF,0x09,0x04,0x19,0x12,0x14,0x90,0x70,0x14,0x12,0x15,0x18,0x00,
0x40,0x42,0x81,0xFE,0x00,0x02,0x02,0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x02,0x00,/*"控",24*/

0x02,0x0A,0x72,0x12,0x12,0xFF,0x12,0x12,0x12,0x02,0x1F,0x00,0x00,0xFF,0x00,0x00,
0x00,0x00,0x7C,0x40,0x40,0xFF,0x48,0x44,0x78,0x00,0xF0,0x02,0x01,0xFE,0x00,0x00,/*"制",25*/

0x00,0x00,0x1F,0x11,0x11,0x11,0x11,0xFF,0x11,0x11,0x11,0x11,0x1F,0x00,0x00,0x00,
0x00,0x00,0xF8,0x10,0x10,0x10,0x10,0xFE,0x11,0x11,0x11,0x11,0xF9,0x01,0x0F,0x00,/*"电",26*/

0x02,0x02,0x42,0x33,0x00,0x00,0x04,0x24,0x24,0x24,0x7F,0x44,0xC4,0x44,0x04,0x00,
0x00,0x00,0x00,0xFE,0x04,0x08,0x00,0x7F,0x42,0x42,0xC2,0x42,0x42,0x7F,0x00,0x00,/*"话",27*/

0x24,0x24,0x25,0x7F,0xC4,0x44,0x00,0x03,0x1C,0x00,0xFF,0x00,0x10,0x08,0x06,0x00,
0x10,0x60,0x80,0xFF,0x80,0x60,0x81,0x01,0x02,0x02,0xE4,0x08,0x30,0xC0,0x00,0x00,/*"秒",0*/

0x00,0x00,0x00,0xFE,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0xFE,0x00,0x00,0x00,0x00,
0x81,0x82,0x84,0xB8,0x84,0x82,0x81,0xFF,0x91,0x91,0x91,0x91,0x91,0x81,0x81,0x00,/*"是",0*/

0x00,0x40,0x41,0x41,0x42,0x44,0x48,0x5F,0x60,0x44,0x44,0x42,0x42,0x41,0x00,0x00,
0x80,0x80,0x00,0x3F,0x22,0x22,0x22,0xA2,0x22,0x22,0x22,0x3F,0x00,0x00,0x80,0x00,/*"否",1*/

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

0x02,0x42,0x33,0x00,0x00,0x22,0x2A,0x2A,0x2A,0xFE,0x2A,0x2A,0x2A,0x22,0x02,0x00,
0x00,0x00,0xFE,0x04,0x08,0x00,0xFF,0xA8,0xA8,0xA8,0xAA,0xA9,0xFE,0x00,0x00,0x00,/*"请",0*/

0x10,0x10,0x9F,0x52,0x12,0x13,0x12,0x04,0x1B,0xE8,0x08,0x08,0x0F,0x08,0x08,0x00,
0x02,0x0C,0xF0,0x04,0x02,0xFC,0x01,0x02,0x84,0x68,0x10,0x68,0x84,0x02,0x01,0x00,/*"放",1*/

0x00,0xE8,0xA8,0xAB,0xAA,0xEA,0xAA,0xBE,0xAA,0xEA,0xAA,0xAB,0xA8,0xE8,0x00,0x00,
0x02,0x02,0x02,0xFE,0xAA,0xAA,0xAA,0xAA,0xAA,0xAA,0xAA,0xFE,0x02,0x02,0x02,0x00,/*"置",2*/

0x08,0x30,0x22,0x24,0x28,0x21,0xA2,0x64,0x22,0x21,0x28,0x24,0x22,0x28,0x30,0x00,
0x20,0x20,0x40,0x7F,0xA2,0x22,0x22,0x22,0x22,0x22,0xA2,0x7F,0x40,0x20,0x20,0x00,/*"容",3*/

0x01,0x01,0x79,0x49,0x49,0x49,0x79,0x07,0x01,0x79,0x4D,0x4B,0x49,0x79,0x01,0x00,
0x10,0x10,0x2F,0x29,0x49,0x49,0x8F,0x00,0x80,0x4F,0x49,0x29,0x29,0x1F,0x10,0x00,/*"器",4*/

0x10,0x10,0x13,0x12,0x12,0x12,0x13,0x10,0x10,0xFF,0x10,0x10,0x90,0x53,0x10,0x00,
0x00,0x04,0xE6,0x24,0x24,0x28,0xE9,0x09,0x02,0x84,0x68,0x18,0x64,0x82,0x1F,0x00,/*"或",0*/

0x00,0x10,0x0C,0x00,0xFF,0x00,0x11,0x21,0xCA,0x44,0x48,0x53,0x60,0x00,0x00,0x00,
0x20,0x20,0x40,0x80,0xFF,0x00,0x40,0x50,0x48,0x42,0x41,0xFE,0x40,0x40,0x40,0x00,/*"将",1*/

0x40,0x40,0x7F,0x49,0x49,0x49,0x7F,0x40,0x60,0x3F,0x20,0x20,0x20,0x3F,0x00,0x00,
0x10,0x18,0xF0,0x10,0x10,0x20,0xFF,0x20,0x21,0x02,0xE4,0x18,0xE4,0x02,0x01,0x00,/*"取",2*/

0x00,0x00,0x3E,0x02,0x02,0x02,0x02,0xFF,0x02,0x02,0x02,0x02,0x3F,0x00,0x00,0x00,
0x00,0x3E,0x02,0x02,0x02,0x02,0x02,0xFE,0x02,0x02,0x02,0x02,0x02,0x3F,0x00,0x00,/*"出",3*/

0x00,0x00,0x00,0x3F,0x24,0x24,0x24,0x24,0x44,0x44,0x44,0xC4,0x44,0x04,0x04,0x00,
0x02,0x04,0x18,0xE0,0x00,0x7F,0x42,0x42,0x42,0x42,0x42,0x42,0x7F,0x00,0x00,0x00,/*"后",4*/

0x00,0x00,0x10,0x10,0x10,0x10,0x10,0xFF,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x00,
0x80,0x80,0x82,0x86,0x8A,0x92,0xE2,0x82,0x82,0x82,0x8A,0x86,0x83,0x80,0x80,0x00,/*"去",5*/

0x00,0x00,0x1F,0x10,0x11,0x11,0x11,0x11,0xFF,0x11,0x11,0x11,0x14,0x18,0x00,0x00,
0x01,0x06,0xF8,0x01,0x01,0xC2,0x22,0x14,0x08,0x14,0x22,0xC2,0x01,0x01,0x01,0x00,/*"皮",6*/

0x40,0x40,0x4F,0x49,0x49,0x49,0x49,0x7F,0x49,0x49,0x49,0x49,0x4F,0x40,0x40,0x00,
0x20,0x20,0xFF,0x20,0x20,0x20,0x20,0xE0,0x20,0x20,0x22,0x21,0xFE,0x20,0x20,0x00,/*"再",7*/

0x04,0x43,0x30,0x01,0x40,0x5C,0x54,0xF7,0x5C,0x42,0x5D,0xF4,0x54,0x5C,0x40,0x00,
0x20,0x20,0x7E,0x80,0x10,0x20,0xFF,0xAA,0xAA,0xAA,0xFE,0xAA,0xAA,0xAA,0x82,0x00,/*"灌",8*/

0x02,0x42,0x24,0x08,0xFF,0x00,0x21,0x22,0x22,0x22,0xFE,0x22,0x22,0x22,0x20,0x00,
0x44,0x44,0x48,0x48,0x50,0x7F,0x42,0xE4,0x50,0x48,0x44,0x4C,0x52,0x42,0x42,0x00,/*"装",9*/



};

/* ASICC 字库代码 8x16 点阵 */
unsigned char ASCIIchardot[16*22] = {
// :(0) .(1) m(2) L(3) 0(4) 1(5) 2(6) 3(7) 4(8) 5(9) 6(10) 7(11) 8(12) 9(13) -(14) _(15)  !(16) H(17) o(18) l(19) d(20)  g(21)
0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x00,/*":",0*/

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x00,0x00,0x00,/*".",1*/

0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x04,0xFC,0x04,0x00,0xFC,0x04,0x00,0xFC,/*"m",2*/

0x10,0x1F,0x10,0x00,0x00,0x00,0x00,0x00,0x04,0xFC,0x04,0x04,0x04,0x04,0x0C,0x00,/*"L",3*/
	
0x00,0x07,0x08,0x10,0x10,0x08,0x07,0x00,0x00,0xF0,0x08,0x04,0x04,0x08,0xF0,0x00,/*"0",13*/

0x00,0x00,0x08,0x08,0x1F,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0xFC,0x04,0x04,0x00,/*"1",4*/

0x00,0x0E,0x10,0x10,0x10,0x10,0x0F,0x00,0x00,0x0C,0x14,0x24,0x44,0x84,0x0C,0x00,/*"2",5*/

0x00,0x0C,0x10,0x10,0x10,0x11,0x0E,0x00,0x00,0x18,0x04,0x84,0x84,0x44,0x38,0x00,/*"3",6*/

0x00,0x00,0x01,0x02,0x0C,0x1F,0x00,0x00,0x00,0x60,0xA0,0x24,0x24,0xFC,0x24,0x24,/*"4",7*/

0x00,0x1F,0x11,0x11,0x11,0x10,0x10,0x00,0x00,0x98,0x04,0x04,0x04,0x88,0x70,0x00,/*"5",8*/

0x00,0x07,0x08,0x11,0x11,0x09,0x00,0x00,0x00,0xF0,0x88,0x04,0x04,0x04,0xF8,0x00,/*"6",9*/

0x00,0x18,0x10,0x10,0x11,0x16,0x18,0x00,0x00,0x00,0x00,0x7C,0x80,0x00,0x00,0x00,/*"7",10*/

0x00,0x0E,0x11,0x10,0x10,0x11,0x0E,0x00,0x00,0x38,0x44,0x84,0x84,0x44,0x38,0x00,/*"8",11*/

0x00,0x0F,0x10,0x10,0x10,0x08,0x07,0x00,0x00,0x80,0x48,0x44,0x44,0x88,0xF0,0x00,/*"9",12*/

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

0x00,0x00,0x00,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xCC,0x00,0x00,0x00,0x00,/*"!",5*/

0x10,0x1F,0x10,0x00,0x00,0x10,0x1F,0x10,0x04,0xFC,0x84,0x80,0x80,0x84,0xFC,0x04,/*"H",0*/

0x00,0x00,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0xF8,0x04,0x04,0x04,0x04,0xF8,0x00,/*"o",1*/

0x00,0x08,0x08,0x1F,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0xFC,0x04,0x04,0x00,0x00,/*"l",2*/

0x00,0x00,0x01,0x01,0x01,0x09,0x0F,0x00,0x00,0xF8,0x04,0x04,0x04,0x08,0xFC,0x04,/*"d",3*/

0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0xD6,0x29,0x29,0x29,0xC9,0x06,0x00,/*"g",0*/
};

//显示ASICC 字符的函数
void LcmPutChar(uint8_t col,uint8_t page,uint8_t Order)
{
	uint8_t i;
	uint16_t x;
	x = Order*0x10; //ASICC 字符从0x20 开始,每个16 byte
	writec(ComTable[page&0x07]|0xB0); //Set Page Address
	writec( ((col+1)>>4) | 0x10); //Set Column Address High Byte
	writec( (col+1)&0x0F ); //Low Byte Colum from S128 -> S1 auto add
	for(i=0;i<8;i++)
	{
		writed( ASCIIchardot[x] );
		x++;
	}
	page++; //下半字符page+1
	writec(ComTable[page&0x07]|0xB0); //Set Page Address
	writec( ((col+1)>>4) | 0x10); //Set Column Address High Byte
	writec( (col+1)&0x0F ); //Low Byte Colum from S128 -> S1 auto add
	for(i=0;i<8;i++)
	{
		writed( ASCIIchardot[x] );
		x++;
	}
	page--; //写完一个字符page 还原
}

void LcmPutBlackChar(uint8_t col,uint8_t page,uint8_t Order)
{
	uint8_t i;
	uint16_t x;
	x = Order*0x10; //ASICC 字符从0x20 开始,每个16 byte
	writec(ComTable[page&0x07]|0xB0); //Set Page Address
	writec( ((col+1)>>4) | 0x10); //Set Column Address High Byte
	writec( (col+1)&0x0F ); //Low Byte Colum from S128 -> S1 auto add
	for(i=0;i<8;i++)
	{
		writed( ~ASCIIchardot[x] );
		x++;
	}
	page++; //下半字符page+1
	writec(ComTable[page&0x07]|0xB0); //Set Page Address
	writec( ((col+1)>>4) | 0x10); //Set Column Address High Byte
	writec( (col+1)&0x0F ); //Low Byte Colum from S128 -> S1 auto add
	for(i=0;i<8;i++)
	{
		writed( ~ASCIIchardot[x] );
		x++;
	}
	page--; //写完一个字符page 还原
}

void LcmPutTurnChar(uint8_t col,uint8_t page,uint8_t Order,uint8_t Black)
{
	if(Black)LcmPutBlackChar(col,page,Order);
	else LcmPutChar(col,page,Order);
}

void LcmPutChineseChar(uint8_t col,uint8_t page,uint8_t Order)
{
	uint8_t i;
	uint16_t x;
	x = Order*0x20; //ASICC 字符从0x20 开始,每个16 byte
	writec(ComTable[page&0x07]|0xB0); //Set Page Address
	writec( ((col+1)>>4) | 0x10); //Set Column Address High Byte
	writec( (col+1)&0x0F ); //Low Byte Colum from S128 -> S1 auto add
	for(i=0;i<16;i++)
	{
		writed( Chinesechardot[x] );
		x++;
	}
	page++; //下半字符page+1
	writec(ComTable[page&0x07]|0xB0); //Set Page Address
	writec( ((col+1)>>4) | 0x10); //Set Column Address High Byte
	writec( (col+1)&0x0F ); //Low Byte Colum from S128 -> S1 auto add
	for(i=0;i<16;i++)
	{
		writed( Chinesechardot[x] );
		x++;
	}
	page--; //写完一个字符page 还原
}

void LcmPutChineseBlackChar(uint8_t col,uint8_t page,uint8_t Order)
{
	uint8_t i;
	uint16_t x;
	x = Order*0x20; //ASICC 字符从0x20 开始,每个16 byte
	writec(ComTable[page&0x07]|0xB0); //Set Page Address
	writec( ((col+1)>>4) | 0x10); //Set Column Address High Byte
	writec( (col+1)&0x0F ); //Low Byte Colum from S128 -> S1 auto add
	for(i=0;i<16;i++)
	{
		writed( ~Chinesechardot[x] );
		x++;
	}
	page++; //下半字符page+1
	writec(ComTable[page&0x07]|0xB0); //Set Page Address
	writec( ((col+1)>>4) | 0x10); //Set Column Address High Byte
	writec( (col+1)&0x0F ); //Low Byte Colum from S128 -> S1 auto add
	for(i=0;i<16;i++)
	{
		writed( ~Chinesechardot[x] );
		x++;
	}
	page--; //写完一个字符page 还原
}

void LcmPutChineseTurnChar(uint8_t col,uint8_t page,uint8_t Order,uint8_t Black)
{
	if(Black)LcmPutChineseBlackChar(col,page,Order);
	else LcmPutChineseChar(col,page,Order);
}

void LcmPutChineseStr(uint8_t col,uint8_t page,uint8_t *puts,uint8_t black)
{
	while(*puts != 0xff)
	{
		if(black)LcmPutChineseBlackChar(col,page,*puts);
		else LcmPutChineseChar(col,page,*puts);
		puts++;
		col = col + 16;
	}
}

//显示字符串的函数
void LcmPutStr(uint8_t col,uint8_t page,uint8_t *puts)
{
	while(*puts != '\0') //判断字符串时候显示完毕
	{
		if(col>(LcmXPixel-8)) //判断行末空间是否足够放一个字符,自动换行
		{
			page=page+2;
			col=0;
		}
		if(page>(LcmYPixel/8-2)) //到了屏幕最下角,自动返回左上角
		{
			page=0;
			col=0;
		}
		LcmPutChar(col,page,*puts);
		puts++;
		col=col+8; //下一个字符8 列之后
	}
}

//显示6 位数的数值(0-255)
void LcmPutNum(uint8_t col,uint8_t page,int32_t Num,uint8_t List)
{
	uint8_t a[6]={0};
	uint8_t Counter_i = 0;
	int32_t NumCache = 0;
	if(List>6)List = 6;
	
	if(Num < 0)
	{
		NumCache = Num;
		Num = -NumCache;
	}
	
	for(Counter_i = 0;Counter_i<List;Counter_i++)
	{
		a[Counter_i] = Num % 10;
		if(Num != 0) Num = Num /10;
	}
	
	if(NumCache < 0)
	{
		LcmPutChar(col-9,page,14);
	}
	else
	{
		LcmPutChar(col-9,page,15);
	}
	
	for(Counter_i = 0;Counter_i<List;Counter_i++)
	{
		LcmPutChar(col+(9*Counter_i),page,(a[List-Counter_i-1]+4));
	}
}

void LcmPutNum2(uint8_t col,uint8_t page,uint32_t Num,uint8_t List)
{
	uint8_t a[6]={0};
	uint8_t Counter_i = 0;
	if(List>6)List = 6;
	for(Counter_i = 0;Counter_i<List;Counter_i++)
	{
		a[Counter_i] = Num % 10;
		if(Num != 0) Num = Num /10;
	}
	for(Counter_i = 0;Counter_i<List;Counter_i++)
	{
		LcmPutChar(col+(8*Counter_i),page,(a[List-Counter_i-1]+4));
	}
}

void LcmPutTime(uint8_t col,uint8_t page,uint16_t Num)
{
	uint8_t a[3]={0};
	uint8_t Counter_i = 0;
	for(Counter_i = 0;Counter_i<3;Counter_i++)
	{
		a[Counter_i] = Num % 10;
		if(Num != 0) Num = Num /10;
	}
	LcmPutChar(col,page,a[2]+4);
	LcmPutChar(col+9,page,1);
	LcmPutChar(col+18,page,a[1]+4);
	LcmPutChar(col+27,page,a[0]+4);
}

void LcmPutBmp( uint8_t *puts )
{
	uint8_t i,j;
	uint16_t X=0;
	for(i=0;i<(LcmYPixel/8);i++)
	{
		writec(0xB0|ComTable[i]); //Set Page Address
		writec(0x10); //Set Column Address = 0
		writec(0x01); //Colum from S1 -> S128 auto add
		for(j=0;j<LcmXPixel;j++)
		{
			writed( puts[X] );
			X++;
		}
	}
}

void ST7565_IO_Delay(uint16_t t)
{
	while(t --);									  
}

void ST7565_Write(uint8_t dat,uint8_t rs) //rs == 1 data rs==0  cmd 
{
	uint8_t i;
	IO_ST7565_SCK_0;
	IO_ST7565_CS_0;
	if(!rs)
	{
		IO_ST7565_RS_0; //Command
 	}else{
		IO_ST7565_RS_1;
	}
	ST7565_IO_Delay(ST7565_DELAY_IO);
	for(i=0;i<8;i++)
	{ 
		if( dat & 0x80){
			IO_ST7565_SDA_1;
		}else{
			IO_ST7565_SDA_0;
		}
		dat <<=1;
		IO_ST7565_SCK_1;
		ST7565_IO_Delay(ST7565_DELAY_IO);
		IO_ST7565_SCK_0;
		ST7565_IO_Delay(ST7565_DELAY_IO);
	}
	ST7565_IO_Delay(ST7565_DELAY_IO);
	IO_ST7565_CS_1;
	IO_ST7565_RS_1;
	ST7565_IO_Delay(ST7565_DELAY_IO);
}

void writec(unsigned char com)
{ 
	ST7565_Write(com,0);
}

void writed(unsigned char dat)
{  
	ST7565_Write(dat,1);
}

void LCD7565_FullFill( uint8_t FillData )
{
	uint8_t i,j;
	for(i=0;i<8;i++)
	{
		ST7565_Write(i,0); //Set Page Address
		ST7565_Write(0x10,0); //Set Column Address(MSByte) = 0
		ST7565_Write(0x00,0); //Colum(LSByte) from S1 -> S128 auto add
		for(j=0;j<128;j++)
		{
			ST7565_Write( FillData,1 );
		}
	}
} 

void LCD_Init(void)
{
	IO_ST7565_CS_1;
	IO_ST7565_RST_0;
	bsp_delayms(10); //hard reset for 10ms
	IO_ST7565_RST_1;
	bsp_delayms(10); 
	ST7565_Write(0xAE,0);
	ST7565_Write(0xE2,0); //Soft Reset
	ST7565_Write(0xA2,0); //Duty bias set  0xA2 is light 0xA3 is dark
	//ST7565_Write(0xA7,0); //0xA7 reverse 0xA6 normal default normal
//	ST7565_Write(0xA0,0); //ADC select S0->S131(?????S1-S128)
	ST7565_Write(0xA1,0);
//	ST7565_Write(0xC8,0); //com1 --> com64
	ST7565_Write(0xC0,0); //com1 --> com64
//	ST7565_Write(0x23,0); //V0 Voltage Regulator Internal Resistor Ratio Set 0x20~0x27
	ST7565_Write(0x24,0);
	bsp_delayms(2);
	ST7565_Write(0x81,0); //V0 voltage set first cmd
	ST7565_Write(0x2f & 0x3F,0); //following V0 voltage set 0x00~0x3F
//	ST7565_Write(48,0);
	bsp_delayms(2);
	ST7565_Write(0xF8,0); //Booster Ratio Select Mode Set first cmd
	ST7565_Write(0x00 & 0x03,0); //following Booset Ratio Register Set 0x00~0x03
	bsp_delayms(2);
	ST7565_Write(0x2F,0); //power control all on
	bsp_delayms(2);
	ST7565_Write(0x40 + 0x00,0); //0x40 + Display Start Line(0)
  LCD7565_FullFill(0x00); //full clear  
	ST7565_Write(0xAF,0); //Display ON
}

void display(unsigned char dat1,unsigned char dat2)
{
   uchar row,col;

   for (row=0xb0; row<0xb8; row++)    //0XB0    0XB8
   {
      writec(row);//set page address
      writec(0x10);//set column address
      writec(0x00);
      for(col=0;col<128;col++)
      {
         writed(dat1);
         writed(dat2);
      }
   }

   bsp_delayms(10);
}

void displaychar(unsigned char *p)
{
   uchar row,col;

   for (row=0xb0; row<0xb8; row++)
   {
      writec(row);//set page address
      writec(0x10);//set column address
      writec(0x00);
      for(col=0;col<128;col++)
      writed(*p++);
   }

   bsp_delayms(10);
}
